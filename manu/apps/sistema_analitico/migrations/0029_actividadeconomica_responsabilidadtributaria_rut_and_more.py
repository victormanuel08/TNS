# Generated by Django 5.2.8 on 2025-12-02 20:24

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('sistema_analitico', '0028_populate_credibanco_config'),
    ]

    operations = [
        migrations.CreateModel(
            name='ActividadEconomica',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(db_index=True, help_text='Código CIIU completo (4-5 dígitos) - Índice único', max_length=10, unique=True)),
                ('descripcion', models.CharField(blank=True, help_text='Descripción de la actividad económica', max_length=500, null=True)),
                ('titulo', models.CharField(blank=True, help_text='Título de la actividad económica', max_length=500, null=True)),
                ('division', models.CharField(blank=True, help_text='División CIIU (primeros 2 dígitos)', max_length=10, null=True)),
                ('grupo', models.CharField(blank=True, help_text='Grupo CIIU (primeros 3 dígitos)', max_length=10, null=True)),
                ('incluye', models.JSONField(blank=True, default=list, help_text='Lista de actividades que incluye', null=True)),
                ('excluye', models.JSONField(blank=True, default=list, help_text='Lista de actividades que excluye', null=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_actualizacion', models.DateTimeField(auto_now=True)),
                ('fecha_ultima_consulta_api', models.DateTimeField(blank=True, help_text='Última vez que se consultó la API para actualizar información', null=True)),
            ],
            options={
                'verbose_name': 'Actividad Económica',
                'verbose_name_plural': 'Actividades Económicas',
                'db_table': 'actividades_economicas',
                'ordering': ['codigo'],
                'indexes': [models.Index(fields=['codigo'], name='actividades_codigo_4b69f8_idx'), models.Index(fields=['division'], name='actividades_divisio_2381a9_idx'), models.Index(fields=['grupo'], name='actividades_grupo_9e69fc_idx')],
            },
        ),
        migrations.CreateModel(
            name='ResponsabilidadTributaria',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(db_index=True, help_text='Código de responsabilidad tributaria (ej: "7", "9", "14", "48", "52") - Índice único', max_length=10, unique=True)),
                ('descripcion', models.CharField(help_text='Descripción de la responsabilidad tributaria', max_length=255)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_actualizacion', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Responsabilidad Tributaria',
                'verbose_name_plural': 'Responsabilidades Tributarias',
                'db_table': 'responsabilidades_tributarias',
                'ordering': ['codigo'],
                'indexes': [models.Index(fields=['codigo'], name='responsabil_codigo_824d4f_idx')],
            },
        ),
        migrations.CreateModel(
            name='RUT',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nit_normalizado', models.CharField(db_index=True, help_text='NIT normalizado (sin puntos ni guiones) - Identificador único', max_length=20, unique=True)),
                ('nit', models.CharField(help_text='NIT con formato original', max_length=20)),
                ('dv', models.CharField(help_text='Dígito de Verificación', max_length=1)),
                ('numero_formulario', models.CharField(blank=True, help_text='Número de formulario del RUT', max_length=50, null=True)),
                ('tipo_contribuyente', models.CharField(blank=True, choices=[('persona_juridica', 'Persona jurídica'), ('persona_natural', 'Persona natural')], help_text='Tipo de contribuyente', max_length=20, null=True)),
                ('razon_social', models.CharField(help_text='Razón social de la empresa', max_length=255)),
                ('nombre_comercial', models.CharField(blank=True, help_text='Nombre comercial', max_length=255, null=True)),
                ('sigla', models.CharField(blank=True, help_text='Sigla de la empresa', max_length=50, null=True)),
                ('pais', models.CharField(default='COLOMBIA', help_text='País', max_length=100)),
                ('departamento_codigo', models.CharField(blank=True, help_text='Código del departamento', max_length=10, null=True)),
                ('departamento_nombre', models.CharField(help_text='Nombre del departamento', max_length=100)),
                ('ciudad_codigo', models.CharField(blank=True, help_text='Código de la ciudad/municipio', max_length=10, null=True)),
                ('ciudad_nombre', models.CharField(help_text='Nombre de la ciudad/municipio', max_length=100)),
                ('direccion_principal', models.TextField(help_text='Dirección de la sede principal')),
                ('codigo_postal', models.CharField(blank=True, help_text='Código postal', max_length=10, null=True)),
                ('telefono_1', models.CharField(blank=True, help_text='Teléfono principal', max_length=20, null=True)),
                ('telefono_2', models.CharField(blank=True, help_text='Teléfono secundario', max_length=20, null=True)),
                ('email', models.EmailField(blank=True, help_text='Correo electrónico', max_length=254, null=True)),
                ('direccion_seccional', models.CharField(blank=True, help_text='Dirección seccional de la DIAN', max_length=255, null=True)),
                ('buzon_electronico', models.CharField(blank=True, help_text='Buzón electrónico', max_length=50, null=True)),
                ('actividad_principal_ciiu', models.CharField(blank=True, help_text='Código CIIU de actividad principal', max_length=10, null=True)),
                ('actividad_principal_fecha_inicio', models.DateField(blank=True, help_text='Fecha de inicio de actividad principal', null=True)),
                ('actividad_secundaria_ciiu', models.CharField(blank=True, help_text='Código CIIU de actividad secundaria', max_length=10, null=True)),
                ('actividad_secundaria_fecha_inicio', models.DateField(blank=True, help_text='Fecha de inicio de actividad secundaria', null=True)),
                ('otras_actividades_ciiu', models.CharField(blank=True, help_text='Código CIIU de otras actividades', max_length=10, null=True)),
                ('numero_establecimientos', models.IntegerField(default=0, help_text='Número de establecimientos')),
                ('responsabilidades_codigos', models.JSONField(blank=True, default=list, help_text='Lista de códigos de responsabilidades')),
                ('responsabilidades_descripcion', models.JSONField(blank=True, default=list, help_text='Descripciones de las responsabilidades')),
                ('responsable_iva', models.BooleanField(default=False, help_text='Es responsable de IVA')),
                ('autorretenedor', models.BooleanField(default=False, help_text='Es autorretenedor')),
                ('obligado_contabilidad', models.BooleanField(default=False, help_text='Obligado a llevar contabilidad')),
                ('regimen_simple', models.BooleanField(default=False, help_text='Régimen Simple de Tributación - SIM')),
                ('facturador_electronico', models.BooleanField(default=False, help_text='Facturador electrónico')),
                ('informante_exogena', models.BooleanField(default=False, help_text='Informante de exogena')),
                ('informante_beneficiarios_finales', models.BooleanField(default=False, help_text='Informante de Beneficiarios Finales')),
                ('constitucion_clase', models.CharField(blank=True, help_text='Clase de constitución', max_length=10, null=True)),
                ('constitucion_numero', models.CharField(blank=True, help_text='Número de constitución', max_length=20, null=True)),
                ('constitucion_fecha', models.DateField(blank=True, help_text='Fecha de constitución', null=True)),
                ('constitucion_notaria', models.CharField(blank=True, help_text='Número de notaría', max_length=20, null=True)),
                ('registro_entidad', models.CharField(blank=True, help_text='Entidad de registro', max_length=20, null=True)),
                ('registro_fecha', models.DateField(blank=True, help_text='Fecha de registro', null=True)),
                ('matricula_mercantil', models.CharField(blank=True, help_text='Número de matrícula mercantil', max_length=50, null=True)),
                ('registro_departamento', models.CharField(blank=True, help_text='Código departamento de registro', max_length=10, null=True)),
                ('registro_ciudad', models.CharField(blank=True, help_text='Código ciudad de registro', max_length=10, null=True)),
                ('vigencia_desde', models.DateField(blank=True, help_text='Vigencia desde', null=True)),
                ('vigencia_hasta', models.DateField(blank=True, help_text='Vigencia hasta', null=True)),
                ('capital_nacional_porcentaje', models.DecimalField(decimal_places=2, default=0, help_text='Porcentaje de capital nacional', max_digits=5)),
                ('capital_nacional_publico_porcentaje', models.DecimalField(decimal_places=2, default=0, help_text='Porcentaje de capital nacional público', max_digits=5)),
                ('capital_nacional_privado_porcentaje', models.DecimalField(decimal_places=2, default=0, help_text='Porcentaje de capital nacional privado', max_digits=5)),
                ('capital_extranjero_porcentaje', models.DecimalField(decimal_places=2, default=0, help_text='Porcentaje de capital extranjero', max_digits=5)),
                ('capital_extranjero_publico_porcentaje', models.DecimalField(decimal_places=2, default=0, help_text='Porcentaje de capital extranjero público', max_digits=5)),
                ('capital_extranjero_privado_porcentaje', models.DecimalField(decimal_places=2, default=0, help_text='Porcentaje de capital extranjero privado', max_digits=5)),
                ('entidad_vigilancia', models.CharField(blank=True, help_text='Entidad de vigilancia y control', max_length=255, null=True)),
                ('entidad_vigilancia_codigo', models.CharField(blank=True, help_text='Código de entidad de vigilancia', max_length=10, null=True)),
                ('representante_legal_representacion', models.CharField(blank=True, help_text='Tipo de representación', max_length=100, null=True)),
                ('representante_legal_fecha_inicio', models.DateField(blank=True, help_text='Fecha inicio ejercicio representación', null=True)),
                ('representante_legal_tipo_doc', models.CharField(blank=True, help_text='Tipo de documento', max_length=20, null=True)),
                ('representante_legal_numero_doc', models.CharField(blank=True, help_text='Número de identificación', max_length=20, null=True)),
                ('representante_legal_dv', models.CharField(blank=True, help_text='Dígito verificador', max_length=1, null=True)),
                ('representante_legal_tarjeta_profesional', models.CharField(blank=True, help_text='Número de tarjeta profesional', max_length=50, null=True)),
                ('representante_legal_primer_apellido', models.CharField(blank=True, help_text='Primer apellido', max_length=100, null=True)),
                ('representante_legal_segundo_apellido', models.CharField(blank=True, help_text='Segundo apellido', max_length=100, null=True)),
                ('representante_legal_primer_nombre', models.CharField(blank=True, help_text='Primer nombre', max_length=100, null=True)),
                ('representante_legal_otros_nombres', models.CharField(blank=True, help_text='Otros nombres', max_length=100, null=True)),
                ('representante_legal_nit', models.CharField(blank=True, help_text='NIT del representante legal', max_length=20, null=True)),
                ('representante_legal_razon_social', models.CharField(blank=True, help_text='Razón social del representante legal', max_length=255, null=True)),
                ('vinculacion_economica', models.BooleanField(default=False, help_text='Tiene vinculación económica')),
                ('grupo_economico_nombre', models.CharField(blank=True, help_text='Nombre del grupo económico y/o empresarial', max_length=255, null=True)),
                ('matriz_nit', models.CharField(blank=True, help_text='NIT de la matriz o controlante', max_length=20, null=True)),
                ('matriz_dv', models.CharField(blank=True, help_text='DV de la matriz', max_length=1, null=True)),
                ('matriz_razon_social', models.CharField(blank=True, help_text='Razón social de la matriz o controlante', max_length=255, null=True)),
                ('archivo_pdf', models.FileField(blank=True, help_text='Archivo PDF del RUT original', null=True, upload_to='ruts/')),
                ('informacion_adicional', models.JSONField(blank=True, default=dict, help_text='Información adicional no estructurada')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_actualizacion', models.DateTimeField(auto_now=True)),
                ('fecha_ultima_consulta_dian', models.DateTimeField(blank=True, help_text='Última vez que se consultó en DIAN', null=True)),
            ],
            options={
                'verbose_name': 'RUT',
                'verbose_name_plural': 'RUTs',
                'db_table': 'ruts',
                'indexes': [models.Index(fields=['nit_normalizado'], name='ruts_nit_nor_3ff9e2_idx'), models.Index(fields=['nit'], name='ruts_nit_2a19a2_idx'), models.Index(fields=['razon_social'], name='ruts_razon_s_414fa5_idx')],
            },
        ),
        migrations.CreateModel(
            name='EstablecimientoRUT',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_establecimiento', models.CharField(blank=True, help_text='Tipo de establecimiento', max_length=50, null=True)),
                ('tipo_establecimiento_codigo', models.CharField(blank=True, help_text='Código del tipo de establecimiento', max_length=10, null=True)),
                ('actividad_economica_ciiu', models.CharField(blank=True, help_text='Código CIIU de actividad económica', max_length=10, null=True)),
                ('actividad_economica_descripcion', models.TextField(blank=True, help_text='Descripción de la actividad económica', null=True)),
                ('nombre', models.CharField(help_text='Nombre del establecimiento', max_length=255)),
                ('departamento_codigo', models.CharField(blank=True, help_text='Código del departamento', max_length=10, null=True)),
                ('departamento_nombre', models.CharField(help_text='Nombre del departamento', max_length=100)),
                ('ciudad_codigo', models.CharField(blank=True, help_text='Código de la ciudad/municipio', max_length=10, null=True)),
                ('ciudad_nombre', models.CharField(help_text='Nombre de la ciudad/municipio', max_length=100)),
                ('direccion', models.TextField(help_text='Dirección del establecimiento')),
                ('matricula_mercantil', models.CharField(blank=True, help_text='Número de matrícula mercantil', max_length=50, null=True)),
                ('fecha_matricula_mercantil', models.DateField(blank=True, help_text='Fecha de la matrícula mercantil', null=True)),
                ('telefono', models.CharField(blank=True, help_text='Teléfono del establecimiento', max_length=20, null=True)),
                ('fecha_cierre', models.DateField(blank=True, help_text='Fecha de cierre (si aplica)', null=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('rut', models.ForeignKey(help_text='RUT al que pertenece este establecimiento', on_delete=django.db.models.deletion.CASCADE, related_name='establecimientos', to='sistema_analitico.rut')),
            ],
            options={
                'verbose_name': 'Establecimiento RUT',
                'verbose_name_plural': 'Establecimientos RUT',
                'db_table': 'rut_establecimientos',
                'ordering': ['nombre'],
            },
        ),
    ]
